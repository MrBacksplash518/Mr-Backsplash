<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mr. Backsplash 518 ‚Äî David LaFaver Jr.</title>

  <!-- Favicon (prevents 404) -->
  <link rel="icon" href="https://raw.githubusercontent.com/MrBacksplash518/Mr-Backsplash/main/david.jpg">

  <meta name="description" content="Beautiful backsplashes, custom tile work, and a neighborly touch. Bringing your vision to life with quality craftsmanship and free estimates." />
  <meta name="theme-color" content="#0b0f34" />
  <link rel="preconnect" href="https://api.github.com">
  <link rel="preconnect" href="https://raw.githubusercontent.com">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* brand + ui */
    :root{
      --brand-gold:#d0b580;     /* your hex */
      --navy:#0b0f34;
      --card-shadow:0 10px 20px rgba(2,12,27,.08), 0 6px 6px rgba(2,12,27,.06);
    }
    .card { box-shadow: var(--card-shadow); }
    .btn { transition: transform .06s ease, box-shadow .12s ease, background .12s; }
    .btn:active { transform: translateY(1px); }
    .tab-active { background: var(--brand-gold); color: var(--navy); }
    .portfolio-card img { display:block; width:100%; height:180px; object-fit:cover; }
    @media (min-width: 640px){ .portfolio-card img{ height: 200px; } }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">

  <!-- Top banner (KEEP NAVY) -->
  <div class="bg-[color:var(--navy)]">
    <div class="mx-auto max-w-6xl px-4 py-10 sm:py-14 relative">
      <!-- Headshot circle at top-right -->
      <img
        src="https://raw.githubusercontent.com/MrBacksplash518/Mr-Backsplash/main/david.jpg"
        alt="Portrait of David LaFaver Jr."
        class="hidden sm:block absolute right-6 top-6 h-28 w-28 rounded-full object-cover ring-4 ring-white shadow-xl"
        onerror="this.style.display='none';"
      />

      <h1 class="text-3xl sm:text-4xl font-extrabold" style="color:var(--brand-gold)">Mr. Backsplash 518</h1>
      <p class="mt-1 text-sm sm:text-base text-indigo-200">
        David LaFaver Jr. ‚Äî Serving Saratoga County &amp; the Adirondacks
      </p>
    </div>
  </div>

  <!-- Hero blurb card: change BACKDROP only (to your gold) -->
  <section class="mx-auto max-w-6xl px-4">
    <div class="card rounded-xl -mt-6 sm:-mt-8 px-5 sm:px-6 py-4 sm:py-5"
         style="background:var(--brand-gold); color:var(--navy)">
      <p>
        Beautiful backsplashes, custom tile work, and a neighborly touch. Bringing your vision to life with quality craftsmanship and free estimates.
      </p>
      <div class="mt-4 flex flex-wrap items-center gap-3">
        <!-- Buttons sit ON TOP of gold card: keep high contrast -->
        <a href="tel:15186504248"
           class="btn inline-flex items-center rounded-lg bg-white px-4 py-2 font-semibold text-[color:var(--navy)] shadow hover:bg-slate-100">
          <span class="mr-2">üìû</span> Call or Text: 518-650-4248
        </a>
        <a href="https://www.instagram.com/mr.backsplash518" target="_blank" rel="noopener"
           class="btn inline-flex items-center rounded-lg bg-white border px-4 py-2 font-medium text-[color:var(--navy)] hover:bg-slate-100">
          <span class="mr-2">üì∑</span> Visit Mr. Backsplash on Instagram
        </a>
      </div>
    </div>
  </section>

  <!-- Services -->
  <section class="mx-auto max-w-6xl px-4 mt-10">
    <h2 class="text-xl font-bold mb-3">Services</h2>
    <ul class="list-disc pl-5 space-y-1 text-slate-700">
      <li>Kitchen backsplash installation</li>
      <li>Tile repairs &amp; regrouting</li>
      <li>Bathroom wall &amp; floor tile</li>
      <li>Custom tile design</li>
    </ul>
  </section>

  <!-- Portfolio -->
  <section class="mx-auto max-w-6xl px-4 mt-10">
    <h2 class="text-xl font-bold">Portfolio</h2>

    <!-- Tabs with clear active backdrop -->
    <div class="mt-4 flex gap-2">
      <button id="tab1" class="btn inline-flex items-center rounded-lg border px-3 py-1.5 text-sm font-medium bg-white tab-active">
        David‚Äôs Portfolio 1
      </button>
      <button id="tab2" class="btn inline-flex items-center rounded-lg border px-3 py-1.5 text-sm font-medium bg-white hover:bg-slate-50">
        David‚Äôs Portfolio 2
      </button>
    </div>

    <!-- Status / error message -->
    <p id="status" class="mt-3 hidden text-amber-700 text-sm"></p>

    <!-- Grid -->
    <div id="grid" class="mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>

    <!-- tiny instructions, unchanged -->
    <div class="mt-6 text-xs text-slate-500">
      Add/replace photos by uploading them to the folders below in the repo. The page updates on reload.
      <ul class="list-disc pl-5 mt-2 space-y-1">
        <li>davids portfolio 1</li>
        <li>davids portfolio 2</li>
      </ul>
    </div>
  </section>

  <footer class="mx-auto max-w-6xl px-4 py-12 text-sm text-slate-500">
    ¬© <span id="yr"></span> Mr. Backsplash 518 ‚Äî Saratoga County &amp; Adirondacks ‚Äî 518-650-4248
  </footer>

  <script>
    // ---------- Configuration (matches your repo exactly) ----------
    const GH_OWNER  = "MrBacksplash518";
    const GH_REPO   = "Mr-Backsplash";
    const GH_BRANCH = "main";
    const PORTFOLIOS = {
      tab1: "davids portfolio 1",
      tab2: "davids portfolio 2"
    };

    // ---------- Helpers that safely handle spaces ----------
    function ghContentsUrl(path) {
      return `https://api.github.com/repos/${GH_OWNER}/${GH_REPO}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(GH_BRANCH)}`;
    }
    function ghRawUrl(path) {
      const parts = path.split('/').map(encodeURIComponent).join('/');
      return `https://raw.githubusercontent.com/${GH_OWNER}/${GH_REPO}/${encodeURIComponent(GH_BRANCH)}/${parts}`;
    }

    // ---------- Basic UI wiring ----------
    const statusEl = document.getElementById('status');
    const gridEl = document.getElementById('grid');
    document.getElementById('yr').textContent = new Date().getFullYear();

    function setActive(tabId) {
      const t1 = document.getElementById('tab1');
      const t2 = document.getElementById('tab2');
      t1.classList.remove('tab-active'); t2.classList.remove('tab-active');
      document.getElementById(tabId).classList.add('tab-active');
    }

    async function loadPortfolio(tabId) {
      setActive(tabId);
      gridEl.innerHTML = "";
      statusEl.classList.add('hidden');

      const folder = PORTFOLIOS[tabId];

      try {
        // single API call per click (keeps us well under GitHub's 60/hr unauthenticated limit)
        const res = await fetch(ghContentsUrl(folder), {
          headers: { "Accept": "application/vnd.github+json" },
          cache: "no-store"
        });

        if (res.status === 403) {
          // likely a temporary rate limit; show a friendly message
          throw new Error("GitHub API 403 (rate limit). Try again in a minute.");
        }
        if (!res.ok) throw new Error(`GitHub API ${res.status}`);

        const list = await res.json();
        const images = list.filter(f => f.type === "file" && /\.(png|jpe?g|gif|webp)$/i.test(f.name));

        if (images.length === 0) {
          statusEl.textContent = `No images found in ‚Äú${folder}‚Äù.`;
          statusEl.classList.remove('hidden');
          return;
        }

        for (const f of images) {
          const url = f.download_url || ghRawUrl(f.path);
          const card = document.createElement('a');
          card.href = url;
          card.target = "_blank";
          card.rel = "noopener";
          card.className = "portfolio-card overflow-hidden rounded-xl bg-white shadow hover:shadow-md transition block";
          // HIDE file names (no caption)
          card.innerHTML = `<img loading="lazy" src="${url}" alt="">`;
          gridEl.appendChild(card);
        }
      } catch (err) {
        statusEl.textContent = "Couldn‚Äôt load this folder. Confirm the repo is public and the path exists.";
        if (String(err).includes("403")) {
          statusEl.textContent = "GitHub is throttling requests temporarily. Please reload in a bit.";
        }
        statusEl.classList.remove('hidden');
        console.error(err);
      }
    }

    document.getElementById('tab1').addEventListener('click', () => loadPortfolio('tab1'));
    document.getElementById('tab2').addEventListener('click', () => loadPortfolio('tab2'));

    // Initial load (Portfolio 1)
    loadPortfolio('tab1');
  </script>
</body>
</html>
