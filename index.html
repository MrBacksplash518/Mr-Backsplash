<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mr. Backsplash 518 — David LaFaver Jr.</title>

  <!-- Fix favicon 404 (use david.jpg for now; swap to favicon.ico later if you add one) -->
  <link rel="icon" href="https://raw.githubusercontent.com/MrBacksplash518/Mr-Backsplash/main/david.jpg">

  <meta name="description" content="Beautiful backsplashes, custom tile work, and a neighborly touch. Serving Saratoga County & the Adirondacks." />
  <meta name="theme-color" content="#0c123a" />
  <link rel="preconnect" href="https://api.github.com">
  <link rel="preconnect" href="https://raw.githubusercontent.com">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- Hero -->
  <header class="relative overflow-hidden">
    <div class="mx-auto max-w-6xl px-4 py-10 sm:py-14">
      <div class="flex items-center justify-between gap-6">
        <div>
          <h1 class="text-3xl sm:text-4xl font-extrabold">Mr. Backsplash 518</h1>
          <p class="mt-1 text-sm sm:text-base text-slate-600">
            David LaFaver Jr. — Serving Saratoga County &amp; the Adirondacks
          </p>
          <div class="mt-4 flex flex-wrap items-center gap-3">
            <a href="tel:15186504248" class="inline-flex items-center rounded-lg bg-amber-500 px-4 py-2 text-white font-semibold shadow hover:bg-amber-600">
              📞 Call or Text: 518-650-4248
            </a>
            <a href="https://www.instagram.com/mr.backsplash" target="_blank" rel="noopener" class="inline-flex items-center rounded-lg border px-4 py-2 font-medium hover:bg-slate-100">
              📷 Visit Mr. Backsplash on Instagram
            </a>
          </div>
          <p class="mt-4 text-slate-700">
            Beautiful backsplashes, custom tile work, and a neighborly touch. Bringing your vision to life with quality craftsmanship and free estimates.
          </p>
        </div>

        <!-- Headshot (top-right) -->
        <img
          id="headshot"
          class="size-28 sm:size-36 rounded-full object-cover ring-4 ring-white shadow-xl"
          alt="Portrait of David LaFaver Jr."
          src="https://raw.githubusercontent.com/MrBacksplash518/Mr-Backsplash/main/david.jpg"
          onerror="this.style.display='none';"
        />
      </div>
    </div>
  </header>

  <!-- Services -->
  <section class="mx-auto max-w-6xl px-4">
    <h2 class="text-xl font-bold mb-3">Services</h2>
    <ul class="list-disc pl-5 space-y-1 text-slate-700">
      <li>Kitchen backsplash installation</li>
      <li>Tile repairs &amp; regrouting</li>
      <li>Bathroom wall &amp; floor tile</li>
      <li>Custom tile design</li>
    </ul>
  </section>

  <!-- Portfolio -->
  <section class="mx-auto max-w-6xl px-4 mt-10">
    <h2 class="text-xl font-bold">Portfolio</h2>
    <div class="mt-4 flex gap-2">
      <button id="tab1" class="tab active inline-flex items-center rounded-lg border px-3 py-1.5 text-sm font-medium bg-white shadow-sm">
        David’s Portfolio 1
      </button>
      <button id="tab2" class="tab inline-flex items-center rounded-lg border px-3 py-1.5 text-sm font-medium hover:bg-slate-50">
        David’s Portfolio 2
      </button>
    </div>

    <p id="status" class="mt-3 hidden text-amber-700 text-sm"></p>

    <div id="grid" class="mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
  </section>

  <footer class="mx-auto max-w-6xl px-4 py-12 text-sm text-slate-500">
    © <span id="yr"></span> Mr. Backsplash 518
  </footer>

  <script>
    // ---- Config that matches your repo EXACTLY ----
    const OWNER  = "MrBacksplash518";
    const REPO   = "Mr-Backsplash";
    const BRANCH = "main";
    const FOLDERS = {
      "tab1": "davids portfolio 1",
      "tab2": "davids portfolio 2",
    };

    const statusEl = document.getElementById('status');
    const gridEl = document.getElementById('grid');
    const yearEl = document.getElementById('yr');
    yearEl.textContent = new Date().getFullYear();

    // Helpers
    const ghContents = (path) =>
      `https://api.github.com/repos/${OWNER}/${REPO}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(BRANCH)}`;

    const rawUrl = (path) =>
      `https://raw.githubusercontent.com/${OWNER}/${REPO}/${encodeURIComponent(BRANCH)}/${path.split('/').map(encodeURIComponent).join('/')}`;

    function setActive(tabId) {
      document.querySelectorAll('.tab').forEach(b => b.classList.remove('bg-white','shadow-sm'));
      document.getElementById(tabId).classList.add('bg-white','shadow-sm');
    }

    async function loadFolder(tabId) {
      setActive(tabId);
      gridEl.innerHTML = "";
      statusEl.classList.add('hidden');

      const folder = FOLDERS[tabId];

      try {
        const res = await fetch(ghContents(folder), { headers: { 'Accept': 'application/vnd.github+json' }});
        if (!res.ok) throw new Error(`GitHub API ${res.status}`);
        const list = await res.json();

        // Filter image files only
        const images = list.filter(it => it.type === 'file' && /\.(png|jpe?g|webp|gif)$/i.test(it.name));
        if (images.length === 0) {
          statusEl.textContent = "No images found in “" + folder + "”.";
          statusEl.classList.remove('hidden');
          return;
        }

        // Render
        for (const it of images) {
          const url = it.download_url || rawUrl(it.path);
          const card = document.createElement('a');
          card.href = url;
          card.target = "_blank";
          card.rel = "noopener";
          card.className = "block overflow-hidden rounded-xl bg-white shadow hover:shadow-md transition";
          card.innerHTML = `
            <img loading="lazy" src="${url}" alt="${it.name}" class="h-40 w-full object-cover">
            <div class="px-3 py-2 text-xs text-slate-600 truncate">${it.name}</div>
          `;
          gridEl.appendChild(card);
        }
      } catch (err) {
        statusEl.textContent = "Couldn’t load this folder. Confirm the repo is public and the path exists.";
        statusEl.classList.remove('hidden');
        console.error(err);
      }
    }

    // Wire tabs
    document.getElementById('tab1').addEventListener('click', () => loadFolder('tab1'));
    document.getElementById('tab2').addEventListener('click', () => loadFolder('tab2'));

    // Initial load
    loadFolder('tab1');
  </script>
</body>
</html>
